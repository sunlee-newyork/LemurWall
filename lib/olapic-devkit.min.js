!function(){var _OlapicDevKitRequest,_OlapicDevKitConfig,_OlapicDevKitStorage,_OlapicDevkKitAPI,_OlapicDevKitPromises,OlapicRequireDevKit;!function(){if(!OlapicRequireDevKit||!OlapicRequireDevKit.requirejs){OlapicRequireDevKit?require=OlapicRequireDevKit:OlapicRequireDevKit={};var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,s,a,c,u,p,f,l,d,h,v,m=n&&n.split("/"),g=k.map,y=g&&g["*"];if(e&&(e=e.split("/"),p=e.length-1,k.nodeIdCompat&&jsSuffixRegExp.test(e[p])&&(e[p]=e[p].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&m&&(v=m.slice(0,m.length-1),e=v.concat(e)),t(e),e=e.join("/")),r&&g&&(m||y)){s=e.split("/");e:for(a=s.length;a>0;a-=1){if(u=s.slice(0,a).join("/"),m)for(c=m.length;c>0;c-=1)if(o=getOwn(g,m.slice(0,c).join("/")),o&&(o=getOwn(o,u))){f=o,l=a;break e}!d&&y&&getOwn(y,u)&&(d=getOwn(y,u),h=a)}!f&&d&&(f=d,l=h),f&&(s.splice(0,l,f),e=s.join("/"))}return i=getOwn(k.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(k.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function s(e,t,r,i){var s,a,c,u,p=null,f=t?t.name:null,l=e,d=!0,h="";return e||(d=!1,e="_@r"+(j+=1)),u=o(e),p=u[0],e=u[1],p&&(p=n(p,f,i),a=getOwn(q,p)),e&&(p?h=a&&a.normalize?a.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),u=o(h),p=u[0],h=u[1],r=!0,s=x.nameToUrl(h))),c=!p||a||r?"":"_unnormalized"+(P+=1),{prefix:p,name:h,parentMap:t,unnormalized:!!c,url:s,originalName:l,isDefine:d,id:(p?p+"!"+h:h)+c}}function a(e){var t=e.id,n=getOwn(D,t);return n||(n=D[t]=new x.Module(e)),n}function c(e,t,n){var r=e.id,i=getOwn(D,r);!hasProp(q,r)||i&&!i.defineEmitComplete?(i=a(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(q[r])}function u(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(D,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function p(){globalDefQueue.length&&(apsp.apply(C,[C.length,0].concat(globalDefQueue)),globalDefQueue=[])}function f(e){delete D[e],delete _[e]}function l(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,s=getOwn(D,o);!s||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,q[o]),e.check()):l(s,t,n))}),n[r]=!0)}function d(){var e,t,n=1e3*k.waitSeconds,o=n&&x.startTime+n<(new Date).getTime(),s=[],a=[],c=!1,p=!0;if(!y){if(y=!0,eachProp(_,function(e){var n=e.map,u=n.id;if(e.enabled&&(n.isDefine||a.push(e),!e.error))if(!e.inited&&o)i(u)?(t=!0,c=!0):(s.push(u),r(u));else if(!e.inited&&e.fetched&&n.isDefine&&(c=!0,!n.prefix))return p=!1}),o&&s.length)return e=makeError("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,u(e);p&&each(a,function(e){l(e,{},{})}),o&&!t||!c||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,d()},50)),y=!1}}function h(e){hasProp(q,e[0])||a(s(e[0],null,!0)).init(e[1],e[2])}function v(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return v(t,x.onScriptLoad,"load","onreadystatechange"),v(t,x.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function g(){var e;for(p();C.length;){if(e=C.shift(),null===e[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}}var y,O,x,b,w,k={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},D={},_={},K={},C=[],q={},R={},S={},j=1,P=1;return b={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?q[e.map.id]=e.exports:e.exports=q[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(k.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},O=function(e){this.events=getOwn(K,e.id)||{},this.map=e,this.shim=getOwn(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},O.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;return this.shim?(x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;R[e]||(R[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=x.execCb(n,o,r,i)}catch(s){e=s}else i=x.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(q[n]=i,req.onResourceLoad&&req.onResourceLoad(x,this.map,this.depMaps)),f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=s(e.prefix);this.depMaps.push(r),c(r,"defined",bind(this,function(r){var i,o,p,l=getOwn(S,this.map.id),d=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return n(e,h,!0)})||""),o=s(e.prefix+"!"+d,this.map.parentMap),c(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),p=getOwn(D,o.id),p&&(this.depMaps.push(o),this.events.error&&p.on("error",bind(this,function(e){this.emit("error",e)})),p.enable()),void 0):l?(this.map.url=x.nameToUrl(l),this.load(),void 0):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(D,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&f(e.map.id)}),u(e)}),i.fromText=bind(this,function(n,r){var o=e.name,c=s(o),p=useInteractive;r&&(n=r),p&&(useInteractive=!1),a(c),hasProp(k.config,t)&&(k.config[o]=k.config[t]);try{req.exec(n)}catch(f){return u(makeError("fromtexteval","fromText eval for "+t+" failed: "+f,f,[t]))}p&&(useInteractive=!0),this.depMaps.push(c),x.completeLoad(o),v([o],i)}),r.load(e.name,v,i,k),void 0)})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){_[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=s(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(b,e.id))return this.depExports[t]=i(this),void 0;this.depCount+=1,c(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&c(e,"error",bind(this,this.errback))}n=e.id,r=D[n],hasProp(b,n)||!r||r.enabled||x.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(D,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:k,contextName:e,registry:D,defined:q,urlFetched:R,defQueue:C,Module:O,makeModuleMap:s,nextTick:req.nextTick,onError:u,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(k[t]||(k[t]={}),mixin(k[t],e,!0,!0)):k[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(S[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=x.makeShimExports(e)),t[n]=e}),k.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(k.paths[n]=e.location),k.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(D,function(e,t){e.inited||e.map.unnormalized||(e.map=s(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,c){var p,f,l;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?u(makeError("requireargs","Invalid require call"),c):t&&hasProp(b,n)?b[n](D[t.id]):req.get?req.get(x,n,t,o):(f=s(n,t,!1,!0),p=f.id,hasProp(q,p)?q[p]:u(makeError("notloaded",'Module name "'+p+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(g(),x.nextTick(function(){g(),l=a(s(null,t)),l.skipMap=i.skipMap,l.init(n,r,c,{enabled:!0}),d()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],s="."===o||".."===o;return-1!==i&&(!s||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(q,s(e,t,!1,!0).id)},specified:function(e){return e=s(e,t,!1,!0).id,hasProp(q,e)||hasProp(D,e)}}),t||(o.undef=function(e){p();var n=s(e,t,!0),i=getOwn(D,e);r(e),delete q[e],delete R[n.url],delete K[e],eachReverse(C,function(t,n){t[0]===e&&C.splice(n,1)}),i&&(i.events.defined&&(K[e]=i.events),f(e))}),o},enable:function(e){var t=getOwn(D,e.id);t&&a(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(k.shim,e)||{},s=o.exports;for(p();C.length;){if(n=C.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);h(n)}if(r=getOwn(D,e),!t&&!hasProp(q,e)&&r&&!r.inited){if(!(!k.enforceDefine||s&&getGlobal(s)))return i(e)?void 0:u(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,o,s,a,c,u,p=getOwn(k.pkgs,e);if(p&&(e=p),u=getOwn(S,e))return x.nameToUrl(u,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(r=k.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(s=i.slice(0,o).join("/"),c=getOwn(r,s)){isArray(c)&&(c=c[0]),i.splice(0,o,c);break}a=i.join("/"),a+=t||(/^data\:|\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+a}return k.urlArgs?a+((-1===a.indexOf("?")?"?":"&")+k.urlArgs):a},load:function(e,t){req.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);x.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);return i(t.id)?void 0:u(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,s=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(s=o.context),i=getOwn(contexts,s),i||(i=contexts[s]=req.s.newContext(s)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-devkit"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),OlapicRequireDevKit.requirejs=requirejs,OlapicRequireDevKit.require=require,OlapicRequireDevKit.define=define}}(),OlapicRequireDevKit.define("requirelib",function(){}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof OlapicRequireDevKit.define&&OlapicRequireDevKit.define.amd)OlapicRequireDevKit.define("classy",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.classy=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return i(n?n:e)},p,p.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="object";t.exports=function(e,t){if(t=t||{},null!=e&&typeof e===r)for(var i in e)n.call(e,i)&&(t[i]=e[i]);return t}},{}],2:[function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="object",i="undefined";t.exports=function(e,t){if(t=t||{},null!=e&&typeof e===r)for(var o in e)n.call(e,o)&&typeof t[o]===i&&(t[o]=e[o]);return t}},{}],3:[function(e,t){"use strict";var n="undefined",r="object",i=Object.prototype.hasOwnProperty,o=e("./copyList");t.exports=function(e,t,s){if(arguments.length<3&&(s=t,t=null),t=t||{},!s||Array.isArray(s))return o(e,t,s);if(null!=e&&typeof e===r&&null!=s&&typeof s===r){var a,c;for(var u in s)i.call(s,u)&&(c=s[u],a=typeof c,typeof e[u]!==n&&(t["string"==a?c:u]=e[u]))}return t}},{"./copyList":5}],4:[function(e,t){"use strict";var n="undefined",r="object",i=Object.prototype.hasOwnProperty,o=e("./copyListIf");t.exports=function(e,t,s){if(arguments.length<3&&(s=t,t=null),t=t||{},!s||Array.isArray(s))return o(e,t,s);if(null!=e&&typeof e===r&&null!=s&&typeof s===r){var a,c,u;for(var p in s)i.call(s,p)&&(c=s[p],a=typeof c,u="string"==a?c:p,typeof e[p]!==n&&typeof t[u]===n&&(t[u]=e[p]))}return t}},{"./copyListIf":6}],5:[function(e,t){"use strict";var n="undefined";t.exports=function(e,t,r){arguments.length<3&&(r=t,t=null),t=t||{},r=r||Object.keys(e);for(var i,o=0,s=r.length;s>o;o++)i=r[o],typeof e[i]!==n&&(t[r[o]]=e[r[o]]);return t}},{}],6:[function(e,t){"use strict";var n="undefined";t.exports=function(e,t,r){arguments.length<3&&(r=t,t=null),t=t||{},r=r||Object.keys(e);for(var i,o=0,s=r.length;s>o;o++)i=r[o],typeof e[i]!==n&&typeof t[i]===n&&(t[i]=e[i]);return t}},{}],7:[function(e,t){t.exports=function(){"use strict";var t=Object.prototype.hasOwnProperty,n="object",r="undefined";return{copy:e("./copy"),copyIf:e("./copyIf"),copyAs:function(e,r){var i={};if(r=r||1,null!=e&&typeof e===n)for(var o in e)t.call(e,o)&&(i[o]=r);return i},copyList:e("./copyList"),copyListIf:e("./copyListIf"),copyKeys:e("./copyKeys"),copyKeysIf:e("./copyKeysIf"),copyExceptKeys:function(e,r,i){if(r=r||{},i=i||{},null!=e&&typeof e===n)for(var o in e)t.call(e,o)&&!t.call(i,o)&&(r[o]=e[o]);return r},bindCopyKeys:function(e,i,o){if(2==arguments.length&&(o=i,i=null),i=i||{},null!=e&&typeof e===n&&null!=o&&typeof o===n){var s,a,c,u;for(var p in o)t.call(o,p)&&(a=o[p],s=typeof a,u=e[p],c=typeof u,c!==r&&(i["string"==s?a:p]="function"==c?u.bind(e):u))}return i}}}()},{"./copy":1,"./copyIf":2,"./copyKeys":3,"./copyKeysIf":4,"./copyList":5,"./copyListIf":6}],8:[function(e,t){t.exports=function(){var e={};return function(t){if(!e[t]){for(var n=[],r=0;t>r;r++)n.push("a["+r+"]");e[t]=new Function("c","a","return new c("+n.join(",")+")")}return e[t]}}()},{}],9:[function(e,t){var n=e("./getInstantiatorFunction");t.exports=function(e,t){return n(t.length)(e,t)}},{"./getInstantiatorFunction":8}],10:[function(e,t){"use strict";var n=e("./core"),r=e("./utils/copy").copy,i=["$before","$after","$override","$copyIf"];t.exports=e("./define")({alias:"z.mixin",callTarget:function(){},statics:{init:function(){var e=this.$initialConfig||{};i.forEach(function(t){e[t]&&n.copyClassConfig(this,e[t],{proto:!0}),this[t]&&n.copyClassConfig(this,this[t],{proto:!1})},this)},beforeOverride:function(e){var t={},n=this.prototype;return i.forEach(function(i){var o=e[i];null!=o&&(r(o,t),r(o,n[i]))}),t}}})},{"./core":18,"./define":21,"./utils/copy":36}],11:[function(e,t){t.exports={}},{}],12:[function(e,t){"use strict";var n=e("../utils/copy").copy,r=e("./modifyFn"),i=e("./canDefineProperty"),o=e("./canGetOwnPropertyDescriptor"),s=function(e,t,s,a){var c,u=a.proto?e.prototype:e,p=e.$superClass,f=p?a.proto?p.prototype:p:void 0,l=a.own;!o||void 0!==s.get&&void 0!=s.set||(c=Object.getOwnPropertyDescriptor(u,t),c&&void 0===s.get&&void 0!==c.get&&(s.get=c.get),c&&void 0===s.set&&void 0!==c.set&&(s.set=c.set));var d,h,v=s.get||s.set;return v?(d=n(s),void 0!==s.get&&(d.get=r(t,s.get,f,p,u,{getter:!0})),void 0!==s.set&&(d.set=r(t,s.set,f,p,u,{setter:!0})),s=d):(h=s.value,"function"==typeof h&&(h=r(t,h,f,p,u))),l?i?Object.defineProperty(u,t,{value:h,enumerable:!1}):u[t]=h:v?Object.defineProperty(u,t,s):u[t]=h,h};t.exports=s},{"../utils/copy":36,"./canDefineProperty":14,"./canGetOwnPropertyDescriptor":15,"./modifyFn":19}],13:[function(e,t){t.exports=function(){"use strict";function e(e,t,n,i,o){function s(t){var s=o.getter?"get":o.setter?"set":null,a=s?r(n,e):null,c=s?a?a[s]:null:n[e],u="function"==typeof c;return u||"init"!=e||i.$superClass||(c=i,u=!0),u?c.apply(this,t):void 0}return function(){var e=this.callSuper,n=this.callSuperWith,r=arguments;this.callSuperWith=function(){return s.call(this,arguments)},this.callSuper=function(){return s.call(this,r)};var i=t.apply(this,r);return this.callSuper=e,this.callSuperWith=n,i}}function t(e,t,i,o){var s=o.getter?"get":o.setter?"set":null,a=s?r(i,e):null,c=s?a?a[s]:null:i[e];return"undefined"==typeof c&&(c=n),function(){var e=this.callOverriden,n=this.callOverridenWith,r=arguments;this.callOverridenWith=function(){return c.apply(this,arguments)},this.callOverriden=function(){return c.apply(this,r)};var i=t.apply(this,r);return this.callOverriden=e,this.callOverridenWith=n,i}}var n=function(){},r=Object.getOwnPropertyDescriptor;return{buildSuperFn:e,buildOverridenFn:t}}()},{}],14:[function(e,t){"use strict";t.exports=function(){var e={};try{return Object.defineProperty(e,"name",{value:"x"}),!0}catch(t){}return!1}()},{}],15:[function(e,t){"use strict";t.exports=function(){return"getOwnPropertyDescriptor"in Object&&"function"==typeof Object.getOwnPropertyDescriptor}()},{}],16:[function(e,t){"use strict";function n(e,t){Object.getOwnPropertyNames(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);(r.get||r.set)&&Object.defineProperty(t,n,r)})}var r=e("./canGetOwnPropertyDescriptor");t.exports=r?n:function(){}},{"./canGetOwnPropertyDescriptor":15}],17:[function(e,t){t.exports=function(){"use strict";var e=function(){};return function(t,n){return e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.prototype.$ownClass=n,n.prototype.$superClass=t,n.$ownClass=n,n.$superClass=t,n}}()},{}],18:[function(e,t){t.exports=function(){"use strict";function t(e){return e=e||{},e.getInstance=function(){return this.INSTANCE||(this.INSTANCE=s(this,arguments)),this.INSTANCE},e.getInstanceIf=function(){return this.INSTANCE?this.INSTANCE:void 0},e}function n(e,n,i){function o(){if(!(this instanceof o)&&o.prototype.forceInstance)return s(o,arguments);if(!this)throw"Cannot call class constructor with undefined context.";if(this.singleton){if(this.$ownClass.INSTANCE)throw"Cannot re-instantiate singleton for class "+o;this.$ownClass.INSTANCE=this}return this.init.apply(this,arguments)}1==arguments.length?(n=e,e=h):e=e||h,a(e,o),d(e.prototype,o.prototype),d(e,o);var u=n.statics||{},p=u.$own;return u.$own=null,n.statics=null,o.$initialConfig=r(o,n),n.singleton&&t(u),r(o,e,{proto:!1,skipOwn:!0,skipProps:c(e.$own,{$own:1,$ownClass:1,$superClass:1,$initialConfig:1})}),r(o,u,{proto:!1}),p&&r(o,p,{proto:!1,own:!0}),"function"!=typeof i?o.init&&o.init():i(o),o}function r(e,t,n,r){n=n||{proto:!0};var i,o,s,a=r||{},c=!p&&n.own,d=t.$own,h=!p&&n.skipOwn&&d,m=n.skipProps;for(i in t)if(u.call(t,i)){if(h&&d[i])continue;if(m&&m[i])continue;o=f?l(t,i):t[i],s=v(e,i,o,n),c?a[i]=1:f?Object.defineProperty(a,i,o):a[i]=s}return c&&(e.$own=a),a}function i(e,n){"function"==typeof e.beforeOverride&&(n=e.beforeOverride(n));var i=n.statics||{},o=i.$own;i.$own=null,n.statics=null,n.singleton&&t(i),r(e,n,null,e.$initialConfig),r(e,i,{proto:!1}),o&&r(e,o,{proto:!1,own:!0})}function o(e,t){r(e,t,{proto:!1})}var s=e("newify"),a=e("./extend"),c=e("../utils/copy").copy,u=Object.prototype.hasOwnProperty,p=e("./canDefineProperty"),f=e("./canGetOwnPropertyDescriptor"),l=f?Object.getOwnPropertyDescriptor:null,d=e("./copyDescriptors"),h=function(){};h.prototype.init=function(){return this},h.prototype.self=function(){return this};var v=e("./assignClassProperty");return{canDefineProperty:p,extend:a,createClass:n,overrideClass:i,overrideObject:o,copyClassConfig:r,BaseClass:h}}()},{"../utils/copy":36,"./assignClassProperty":12,"./canDefineProperty":14,"./canGetOwnPropertyDescriptor":15,"./copyDescriptors":16,"./extend":17,newify:9}],19:[function(e,t){function n(e,t,n,o,c,u){var p=r.test(t),f=i.test(t);return u=u||{},p&&(t=s(e,t,n,o,u)),f&&(t=a(e,t,c,u)),t}var r=/\bcallSuper|callSuperWith\b/,i=/\bcallOverriden|callOverridenWith\b/,o=e("./buildClassFunctions"),s=o.buildSuperFn,a=o.buildOverridenFn;t.exports=n},{"./buildClassFunctions":13}],20:[function(e,t){var n=Array.prototype.slice,r=e("./getClass"),i=e("newify");t.exports=function(e){"use strict";var t=r(e),o=n.call(arguments,1);return i(t,o)}},{"./getClass":25,newify:9}],21:[function(e,t){function n(e){c.preprocess(e)}function r(){return p+u++}var i=e("./getClass"),o=e("./processClass"),s=e("./Registry"),a=e("./core"),c=e("./processors/ClassProcessor"),u=0,p="ZClass-";t.exports=function(e,t){"use strict";1==arguments.length&&(t=e,e=null);var c=e||t.extend,u=t.alias||(t.alias=r());return c=i(c)||c,c||console.warn("Could not find class to extend ("+t.extend+"). Extending base class."),n(t,c),a.createClass(c,t,function(e){s[u]&&console.warn("A class with alias "+u+" is already registered. It will be overwritten!"),s[u]=e,o(e)})}},{"./Registry":11,"./core":18,"./getClass":25,"./processClass":32,"./processors/ClassProcessor":33}],22:[function(e,t){var n=(e("./define"),e("./utils/copy").copyIf);t.exports=function(e){"use strict";return OlapicRequireDevKit.define(n({extend:"z.mixin"},e))}},{"./define":21,"./utils/copy":36}],23:[function(e,t){var n=e("./getClass"),r=e("./core"),i=r.BaseClass;t.exports=function(e){"use strict";e=n(e),e&&e!=i&&e.destroy()}},{"./core":18,"./getClass":25}],24:[function(e,t){t.exports=function(t){"use strict";e("./define");return t=t||{},t.extend=t.extend||this.prototype.alias,OlapicRequireDevKit.define(t)}},{"./define":21}],25:[function(e,t){var n=e("./Registry"),r=e("./core").BaseClass;t.exports=function(e){return e?("string"!=typeof e&&(e=e.alias||(e.prototype?e.prototype.alias:e)),n[e]):r}},{"./Registry":11,"./core":18}],26:[function(e,t){var n=e("./core").BaseClass,r=e("./getClass");t.exports=function(e){"use strict";if(e instanceof n)return e;e="string"==typeof e?{alias:e}:e||{};var t=r(e);return t||console.warn("Cannot find class for ",e),t&&t.prototype.singleton?t.getInstance():new t(e)}},{"./core":18,"./getClass":25}],27:[function(e,t){var n=e("./core").BaseClass,r=e("./getClass");t.exports=function(e){"use strict";var t=r(e);if(t&&t!=n&&t.$superClass!=n){for(;t.$superClass&&t.$superClass!=n;)t=t.$superClass;return t}}},{"./core":18,"./getClass":25}],28:[function(e,t){t.exports=function(){"use strict";function t(e,t){return r(e,t,{allowSame:!0})}var n=e("./core"),r=e("./isSubclassOf");e("./Mixin");var i=e("./utils/copy");return{_:i.copy(i),BaseClass:n.BaseClass,extend:n.extend,createClass:n.createClass,overrideClass:n.overrideClass,define:e("./define"),override:e("./override"),getClass:e("./getClass"),classRegistry:e("./Registry"),defineMixin:e("./defineMixin"),mixin:e("./processors/MixinProcessor").mixin,create:e("./create"),getInstance:e("./getInstance"),destroyClass:e("./destroyClass"),getParentClass:e("./getParentClass"),isSubclassOf:r,isSameOrSubclassOf:t,isClassLike:t}}()},{"./Mixin":10,"./Registry":11,"./core":18,"./create":20,"./define":21,"./defineMixin":22,"./destroyClass":23,"./getClass":25,"./getInstance":26,"./getParentClass":27,"./isSubclassOf":29,"./override":30,"./processors/MixinProcessor":34,"./utils/copy":36}],29:[function(e,t){var n=e("./getClass");t.exports=function(e,t,r){"use strict";if(e=n(e),t=n(t),!e||!t)return!1;if(r&&r.allowSame&&e===t)return!0;for(;e&&e.$superClass!=t;)e=e.$superClass;return!!e}},{"./getClass":25}],30:[function(e,t){var n=e("./getClass");t.exports=function(e,t){"use strict";var r=n(e);return r&&r.override(t),r}},{"./getClass":25}],31:[function(e,t){t.exports=function(t){"use strict";return e("./core").overrideClass(this,t)}},{"./core":18}],32:[function(e,t){function n(e){return r(this.prototype,this.prototype,e),this}var r=e("./utils/copy").copyKeys,i=e("./extendClass"),o=e("./overrideClass"),s=e("./unregisterClass"),a=e("./processors/ClassProcessor");t.exports=function(e){"use strict";if(e.extend=i,e.override=o,e.aliasMethods=n,"function"==typeof e.destroy){var t=e.destroy;e.destroy=function(){t.call(this),s.call(this)}}else e.destroy=s;a.process(e),e.init&&e.init()}},{"./extendClass":24,"./overrideClass":31,"./processors/ClassProcessor":33,"./unregisterClass":35,"./utils/copy":36}],33:[function(e,t){t.exports=function(){"use strict";var t=[],n={attach:function(e){t.push(e)},preprocess:function(e,n){t.forEach(function(t){t.preprocess&&t.preprocess(e,n)})},process:function(e){return t.forEach(function(t){t.process(e)}),e}};return n.attach(e("./MixinProcessor")),n}()},{"./MixinProcessor":34}],34:[function(e,t){t.exports=function(){"use strict";function t(e){var t=e.mixins||[];t.forEach(function(t){o(e,t)})}function n(e){if(!e.addMixin){var t=function(e){o(this,e)};l.canDefineProperty?Object.defineProperties(e,{addMixin:{value:t}}):e.addMixin=t}}function r(e,t){return e.$mixins&&~e.$mixins.indexOf(t)?!0:(n(e),e.$mixins=e.$mixins?[].concat(e.$mixins):[],e.$mixins.push(t),!1)}function i(e,t){return x.forEach(function(n){var r=e[n],i=r;if(null!=r){t&&(i=t[n]=t[n]||{});for(var o in r)y(r,o)&&(i[o]=e[o])}}),t}function o(e,t,n){if(1==arguments.length&&(t=e,e={}),!t)return e;n=n||{};var r=m(t),a=n.mixinIdentifier||t;if(r&&("string"==typeof t&&(t={alias:t}),t==r?t=r.prototype:v(r.prototype,t),i(t),a=t.alias),e.$ownClass&&!n.skipStatics){var c=r?i(r,{}):t.statics;if(c&&x.some(function(e){return!!c[e]})){n.skipWarning=!0;var u="statics."+a;o(e.$ownClass,c,{skipStatics:!0,mixinIdentifier:u})}}return s(e,t,a,n),e
}function s(e,t,n,i){n=n||t.alias,r(e,n)||f(e,t,i)}function a(e,t,n){var r=e[t],i="function"==typeof r?r:O;return function(){var e=arguments,t=this.callTarget,r=this.callTargetWith;this.callTarget=function(){return i.apply(this,e)},this.callTargetWith=function(){return i.apply(this,arguments)};var o=n.apply(this,e);return this.callTarget=t,this.callTargetWith=r,o}}function c(e,t,n,r){t[n]=e?d[e](r,t[n]):a(t,n,r)}function u(e,t,n,r,i){var o,s,a,u=i?i.skipProperties:null;for(o in r)if(y(r,o)){if("init"==o){a={when:e,props:r};continue}if(u&&u[o])continue;if(s=r[o],"$copyIf"==t){"undefined"==typeof n[o]&&(n[o]=s);continue}"function"==typeof s?"function"==typeof n[o]?c(e,n,o,s):n[o]=s:e&&"undefined"!=typeof n[o]||(n[o]=s)}return a}function p(e,t,n){if(n){var r=n.props.init,i=n.when,o=t.initOn||"init";c(i,e,o,r)}}function f(e,t,n){e.callTarget=e.callTarget||O,n=n||{},n.skipWarning||t.$before||t.$after||t.$override||t.$copyIf||console.warn("No $before, $after or $override properties on the mixin ",t,". This will result in nothing being mixed in.");var r=b(e,t.$before,n),i=w(e,t.$after,n);k(e,t.$copyIf,n);var o=D(e,t.$override,n);p(e,t,r||i||o)}var l=e("../core"),d=e("../utils/function"),h=d.bindArgs,v=e("../utils/copy").copyIf,m=e("../getClass"),g=Object.prototype.hasOwnProperty,y=function(e,t){return g.call(e,t)},O=function(){},x=["$copyIf","$override","$after","$before"],b=h(u,"before","$before"),w=h(u,"after","$after"),k=h(u,"copyIf","$copyIf"),D=h(u,"","$override");return{mixin:o,preprocess:function(){},process:function(e){t(e.prototype),t(e)}}}()},{"../core":18,"../getClass":25,"../utils/copy":36,"../utils/function":37}],35:[function(e,t){var n=e("./Registry");t.exports=function(){"use strict";var e=this.prototype.alias;n[e]=null,delete n[e]}},{"./Registry":11}],36:[function(e,t){t.exports=e("copy-utils")},{"copy-utils":7}],37:[function(e,t){t.exports=function(){function e(e,t){return function(){var n=o.call(t||[]);return arguments.length&&n.push.apply(n,arguments),e.apply(this,n)}}function t(t){return e(t,o.call(arguments,1))}function n(e,t,n){return function(){"before"===e&&n.apply(this,arguments);var r=t.apply(this,arguments);return"before"!==e&&n.apply(this,arguments),r}}function r(e,t){return n("before",t,e)}function i(e,t){return n("after",t,e)}var o=Array.prototype.slice;return{before:r,after:i,bindArgs:t,bindArgsArray:e}}()},{}]},{},[28])(28)}),function(e,t){"function"==typeof OlapicRequireDevKit.define&&OlapicRequireDevKit.define.amd?OlapicRequireDevKit.define("request",t):"object"==typeof exports?module.exports=t:e.request=t(e)}(this,function(){var e,t={},n={};return n.parse=function(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]},n.toQuery=function(e){var t,n=[];for(t in e)n.push(t+"="+e[t]);return n.join("&")},n.verifyQuery=function(e,t){var n={},r=null;for(r in t)new RegExp("[?|&]"+r+"=").test(e)||(n[r]=t[r]);return n},e=function(e,t,r,i){var o={success:function(){},error:function(){},always:function(){}},s=null,a={},c="file:"===window.location.protocol?"https:":window.location.protocol;return"GET"===e&&(i=n.verifyQuery(t,i)),window.XDomainRequest?s=new XDomainRequest:window.ActiveXObject?s=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(s=new XMLHttpRequest),s&&(i&&(t+=(t.indexOf("?")>-1?"&":"?")+n.toQuery(i)),s.open(e,t.indexOf("http")>-1?t:c+t,!0),s.onload=function(){"OK"===s.statusText&&200===s.status?(o.success.apply(o,n.parse(s)),o.always.apply()):(o.error.apply(o,n.parse(s)),o.always.apply())},s.onerror=function(){o.error.apply(o,n.parse(s)),o.always.apply()},"POST"===e&&(s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r=n.toQuery(r)),"GET"===e&&(r=null),setTimeout(function(){s.send(r)},0)),a={success:function(e){return o.success=e,a},error:function(e){return o.error=e,a},always:function(e){return o.always=e,a}}},t.get=function(t,n){return e("GET",t,{},n)},t.put=function(t,n,r){return e("PUT",t,n,r)},t.post=function(t,n,r){return e("POST",t,n,r)},t["delete"]=function(t,n){return e("DELETE",t,{},n)},t}),OlapicRequireDevKit.define("utils",[],function(){var e={clone:function(e){return JSON.parse(JSON.stringify(e))},merge:function(e,t){"object"!=typeof e&&(e={});for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("object"==typeof r){e[n]=this.merge(e[n],r);continue}e[n]=r}return e},isValidEntity:function(e,t){var n="<"+t+".entity>";return e.description()===n?!0:!1}};return e}),OlapicRequireDevKit.define("handler",["classy","utils"],function(e,t){var n=e.define({alias:"handler",createEntityFromJSON:function(){return null},extractEntitiesFromObject:function(){return null},getResourcesFromObject:function(e){var n=null,r={},i={},o={};for(n in e)n.indexOf(":")>-1&&e[n]?(i=n.split(":"),o={},o[i[0]]={},null!==e[n]&&(o[i[0]][i[1]]={link:e[n]._links.self.href}),r=t.merge(r,o)):"media"!==n&&"customer"!==n&&e[n]&&null!==e[n]&&(r[n]={link:e[n]._links.self.href});return r},getFormsFromObject:function(e){var n=null,r={},i={},o={};for(n in e)n.indexOf(":")>-1?(i=n.split(":"),o={},o[i[0]]={},o[i[0]][i[1]]=e[n],r=t.merge(r,o)):"media"!==n&&(r[n]=e[n]);return r}});return n}),OlapicRequireDevKit.define("entity",["classy"],function(e){var t=e.define({alias:"entity",data:{},init:function(e){this.data=e},get:function(e){for(var t,n=e.split("/"),r=0;r<n.length;r++)if(t=1>r?this.data[n[r]]:t[n[r]],""===t||"undefined"==typeof t)return null;return t},description:function(){return"<"+this.alias+">"}});return t}),OlapicRequireDevKit.define("batch",["classy"],function(e){var t=e.define({alias:"batch",init:function(){this.currentURL="",this.prevURL="",this.nextURL="",this.sorting="recent",this.limit=20,this.rights=!1},fetch:function(){var e=_OlapicDevKitPromises.defer(),t=[],n={},r=this,i={auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion,count:this.limit};return this.rights&&(i.rights_given=1),_OlapicDevKitRequest.get(this.currentURL,i).success(function(i){t=_OlapicDevkKitAPI.media.extractEntitiesFromObject(i),n=t.links,r.nextURL=n.next?n.next.href:null,r.prevURL=n.prev?n.prev.href:null,e.resolve(t.media)}).error(function(t){e.reject(t)}),e.promise},next:function(){return this.currentURL=this.nextURL,this.fetch()},prev:function(){return this.currentURL=this.prevURL,this.fetch()}});return t}),OlapicRequireDevKit.define("customer.handler",["classy","utils"],function(e,t){var n=e.define({extend:"handler",alias:"customer.handler",createEntityFromJSON:function(n){for(var r=n.data._embedded.customer,i=t.clone(r),o=e.getClass("customer.entity"),s=["_embedded","_fixed","_forms","_links","views"],a=0;a<s.length;a++)delete i[s[a]];return i.link=r._links.self.href,i.resources=this.getResourcesFromObject(r._embedded),i.actions=this.getFormsFromObject(r._forms),new o(i)},getUploaderFromCustomer:function(e){var t=e.get("resources/user/link"),n=null,r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){n=_OlapicDevkKitAPI.uploader.createEntityFromJSON(e),r.resolve(n)}).error(function(e){r.reject(e)}),r.promise},createUploaderFromCustomer:function(e,t){var n=e.get("actions/users/create/action/href"),r=null,i=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.post(n,t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){r=_OlapicDevkKitAPI.uploader.createEntityFromJSON(e),i.resolve(r)}).error(function(e){i.reject(e)}),i.promise},searchStreamFromCustomer:function(e,t){var n=e.get("actions/streams/search/action/href"),r=_OlapicDevKitPromises.defer(),i=null;return _OlapicDevKitRequest.get(n,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion,tag_key:t}).success(function(e){i=_OlapicDevkKitAPI.stream.createEntityFromJSON(e.data),r.resolve(i)}).error(function(e){r.reject(e)}),r.promise},searchCategoryFromCustomer:function(e,t){var n=e.get("actions/categories/search/action/href"),r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(n,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion,tag_key:t}).success(function(e){category=_OlapicDevkKitAPI.category.createEntityFromJSON(e.data),r.resolve(category)}).error(function(e){r.reject(e)}),r.promise}});return n}),OlapicRequireDevKit.define("customer.entity",["classy"],function(e){var t=e.define({extend:"entity",alias:"customer.entity",getUploader:function(){var e=_OlapicDevkKitAPI.customer;return e.getUploaderFromCustomer(this)},createUploader:function(e){var t=_OlapicDevkKitAPI.customer;return t.createUploaderFromCustomer(this,e)},searchStream:function(e){var t=_OlapicDevkKitAPI.customer;return t.searchStreamFromCustomer(this,e)},searchCategory:function(e){var t=_OlapicDevkKitAPI.customer;return t.searchCategoryFromCustomer(this,e)}});return t}),OlapicRequireDevKit.define("uploader.handler",["classy","utils"],function(e,t){var n=e.define({extend:"handler",alias:"uploader.handler",createEntityFromJSON:function(n){for(var r=n.data,i=t.clone(r),o=e.getClass("uploader.entity"),s=["_embedded","_fixed","_forms","_links","views"],a=0;a<s.length;a++)delete i[s[a]];return i.link=r._links.self.href,i.resources=this.getResourcesFromObject(r._embedded),i.actions=this.getFormsFromObject(r._forms),new o(i)},getUploadURLFromUploader:function(e){var t="?auth_token="+_OlapicDevKitStorage.get("auth_token"),n="&version="+_OlapicDevKitConfig.apiVersion,r=e.get("actions/media/upload/action/href");return r+t+n},getInstagramUserFromCustomer:function(e,t){var n=_OlapicDevKitConfig.apiURL+"/customers/"+e.get("id")+"/instagram_users/"+t,r=_OlapicDevKitPromises.defer(),i=null;return _OlapicDevKitRequest.get(n,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:"beta"}).success(function(e){i=_OlapicDevkKitAPI.uploader.createEntityFromJSON(e),r.resolve(i)}).error(function(e){r.reject(e)}),r.promise}});return n}),OlapicRequireDevKit.define("uploader.entity",["classy"],function(e){var t=e.define({extend:"entity",alias:"uploader.entity",getUploadUrl:function(){var e=_OlapicDevkKitAPI.uploader;return e.getUploadURLFromUploader(this)}});return t}),OlapicRequireDevKit.define("media.batch",["classy","utils"],function(e){var t=e.define({extend:"batch",alias:"media.batch",init:function(e,t,n,r){this.callSuper(),t&&(this.sorting=t),n&&(this.limit=n),r&&(this.rights=r),this.currentURL=e.get("resources/media/"+this.sorting+"/link")}});return t}),OlapicRequireDevKit.define("media.handler",["classy","utils"],function(e,t){var n=e.define({extend:"handler",alias:"media.handler",createEntityFromJSON:function(n){for(var r=t.clone(n),i=e.getClass("media.entity"),o=["_embedded","_fixed","_forms","_links","views","_analytics"],s=0;s<o.length;s++)delete r[o[s]];return r.link=n._links.self.href,r.resources=this.getResourcesFromObject(n._embedded),r.actions=this.getFormsFromObject(n._forms),new i(r)},extractEntitiesFromObject:function(e){var t=e.data._embedded.media,n=[],r={},i=0,o=e.data._links;for(i=0;i<t.length;i++)r=this.createEntityFromJSON(t[i]),n.push(r);return{media:n,links:o}},getUploaderFromMedia:function(e){var t=e.get("resources/uploader/link"),n=null,r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){n=_OlapicDevkKitAPI.uploader.createEntityFromJSON(e),r.resolve(n)}).error(function(e){r.reject(e)}),r.promise},reportMedia:function(e,t){var n=e.get("actions/report/action/href"),r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.post(n,t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(){r.resolve()}).error(function(e){r.reject(e)}),r.promise},getRelatedStreamsFromMedia:function(e){var t=e.get("resources/streams/all/link"),n=_OlapicDevKitPromises.defer(),r=null;return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){r=_OlapicDevkKitAPI.stream.createEntityFromJSON(e.data),n.resolve(r)}).error(function(e){n.reject(e)}),n.promise}});return n}),OlapicRequireDevKit.define("media.entity",["classy"],function(e){var t=e.define({extend:"entity",alias:"media.entity",getUploader:function(){var e=_OlapicDevkKitAPI.media;return e.getUploaderFromMedia(this)},report:function(e){var t=_OlapicDevkKitAPI.media;return t.reportMedia(this,e)},getRelatedStreams:function(){var e=_OlapicDevkKitAPI.media;return e.getRelatedStreamsFromMedia(this)}});return t}),OlapicRequireDevKit.define("stream.handler",["classy","utils"],function(e,t){var n=e.define({extend:"handler",alias:"stream.handler",createEntityFromJSON:function(n){for(var r=t.clone(n),i=e.getClass("stream.entity"),o=["_embedded","_fixed","_forms","_links","views","_analytics"],s=0;s<o.length;s++)delete r[o[s]];return r.link=n._links.self.href,r.resources=this.getResourcesFromObject(n._embedded),r.actions=this.getFormsFromObject(n._forms),new i(r)},getBaseImageFromStream:function(e){var t=e.get("resources/base_image/link"),n=null,r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){n=_OlapicDevkKitAPI.media.createEntityFromJSON(e.data),r.resolve(n)}).error(function(e){r.reject(e)}),r.promise},getCoverImageFromStream:function(e){var t=e.get("resources/cover_media/link"),n=null,r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){n=_OlapicDevkKitAPI.media.createEntityFromJSON(e.data),r.resolve(n)}).error(function(e){r.reject(e)}),r.promise},getStreamByID:function(e){var t=_OlapicDevKitConfig.apiURL+"/streams/"+e,n=null,r=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){n=_OlapicDevkKitAPI.stream.createEntityFromJSON(e.data),r.resolve(n)}).error(function(e){r.reject(e)}),r.promise}});return n}),OlapicRequireDevKit.define("stream.entity",["classy"],function(e){var t=e.define({extend:"entity",alias:"stream.entity",getBaseImage:function(){var e=_OlapicDevkKitAPI.stream;return e.getBaseImageFromStream(this)},getCoverImage:function(){var e=_OlapicDevkKitAPI.stream;return e.getCoverImageFromStream(this)}});return t}),OlapicRequireDevKit.define("category.handler",["classy","utils"],function(e,t){var n=e.define({extend:"handler",alias:"category.handler",createEntityFromJSON:function(n){for(var r=t.clone(n),i=e.getClass("category.entity"),o=["_embedded","_forms","_links"],s=0;s<o.length;s++)delete r[o[s]];return r.link=n._links.self.href,r.resources=this.getResourcesFromObject(n._embedded),r.actions=this.getFormsFromObject(n._forms),new i(r)}});return n}),OlapicRequireDevKit.define("category.entity",["classy"],function(e){var t=e.define({extend:"entity",alias:"category.entity"});return t}),OlapicRequireDevKit.define("widget.handler",["classy","utils"],function(e,t){var n=e.define({extend:"handler",alias:"widget.handler",createEntityFromJSON:function(n){for(var r=n.data,i=t.clone(r),o=e.getClass("widget.entity"),s=["_embedded","_links","_fixed"],a=0;a<s.length;a++)delete i[s[a]];return i.link=r._links.self.href,i.resources=this.getResourcesFromObject(r._embedded),new o(i)},getSettingsFromWidget:function(e){var t=e.get("resources/setting/link"),n=_OlapicDevKitPromises.defer();return _OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getStreamFromWidget:function(e){var t=e.get("resources/stream")?e.get("resources/stream/link"):null,n=_OlapicDevKitPromises.defer(),r=null;return t?_OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){r=_OlapicDevkKitAPI.stream.createEntityFromJSON(e.data),n.resolve(r)}).error(function(e){n.reject(e)}):n.reject({code:"400",message:"there's no stream associated to the widget instance"}),n.promise},getCategoryFromWidget:function(e){var t=e.get("resources/category")?e.get("resources/category/link"):null,n=_OlapicDevKitPromises.defer(),r=null;return t?_OlapicDevKitRequest.get(t,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(e){r=_OlapicDevkKitAPI.category.createEntityFromJSON(e.data),n.resolve(r)}).error(function(e){n.reject(e)}):n.reject({code:"400",message:"there's no category associated to the widget instance"}),n.promise}});return n}),OlapicRequireDevKit.define("widget.entity",["classy"],function(e){var t=e.define({extend:"entity",alias:"widget.entity",getSettings:function(){var e=_OlapicDevkKitAPI.widget;return e.getSettingsFromWidget(this)},getStream:function(){var e=_OlapicDevkKitAPI.widget;return e.getStreamFromWidget(this)},getCategory:function(){var e=_OlapicDevkKitAPI.widget;return e.getCategoryFromWidget(this)}});return t}),OlapicRequireDevKit.define("api",["handler","customer.handler","entity","customer.entity","uploader.handler","uploader.entity","batch","media.batch","media.handler","media.entity","stream.handler","stream.entity","category.handler","category.entity","widget.handler","widget.entity"],function(e,t,n,r,i,o,s,a,c,u,p,f,l,d,h){return _OlapicDevkKitAPI={},_OlapicDevkKitAPI.handler=new e,_OlapicDevkKitAPI.customer=new t,_OlapicDevkKitAPI.uploader=new i,_OlapicDevkKitAPI.media=new c,_OlapicDevkKitAPI.stream=new p,_OlapicDevkKitAPI.mediaBatch=a,_OlapicDevkKitAPI.category=new l,_OlapicDevkKitAPI.widget=new h,_OlapicDevkKitAPI}),OlapicRequireDevKit.define("helpers",[],function(){var e={includeCSS:function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t),!0},request:function(){return _OlapicDevKitRequest},promises:function(){return _OlapicDevKitPromises}};return e}),OlapicRequireDevKit.define("olapic",["api","helpers"],function(e,t){var n=function(){var n=["api"],r=["api","track"],i=!1,o=null,s=null,a=null;return o=function(e){return-1===r.indexOf(e)?!1:(n.push(e),!0)},s=function(e){return a(e)},connectWithTokenAndWidgetInstance=function(e,t){return a(e,t)},a=function(t,n){var r=_OlapicDevKitPromises.defer(),o=null,s=_OlapicDevKitConfig.apiURL,a=n?!0:!1,c=null;return _OlapicDevKitStorage.set("auth_token",t),a&&(s+="/widgets/"+n),_OlapicDevKitRequest.get(s,{auth_token:_OlapicDevKitStorage.get("auth_token"),version:_OlapicDevKitConfig.apiVersion}).success(function(t){i=!0,o=e.customer.createEntityFromJSON(t),a?(c=e.widget.createEntityFromJSON(t),r.resolve({customer:o,widget:c})):r.resolve(o)}).error(function(e){r.reject(e)}),r.promise},isConnected=function(){return i},{loadModule:o,connectWithToken:s,connectWithTokenAndWidgetInstance:connectWithTokenAndWidgetInstance,isConnected:isConnected,api:e,helpers:t}};return n}),OlapicRequireDevKit.define("config",[],function(){var e={apiURL:"//photorankapi-a.akamaihd.net",apiVersion:"v2.1"};return e}),OlapicRequireDevKit.define("storage",[],function(){var e={data:{},set:function(e,t){return this.data[e]=t,!0},get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},remove:function(e){return this.data.hasOwnProperty(e)?delete this.data[e]:!1}};return e}),function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof OlapicRequireDevKit.define&&OlapicRequireDevKit.define.amd)OlapicRequireDevKit.define("q",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function e(e){return function(){return Q.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===tt(e)||e instanceof B}function r(e,t){if($&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(nt)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var o=n.join("\n"+nt+"\n");e.stack=i(o)}}function i(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];a(i)||o(i)||!i||n.push(i)}return n.join("\n")}function o(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function a(e){var t=s(e);if(!t)return!1;var n=t[0],r=t[1];return n===L&&r>=W&&st>=r}function c(){if($)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=s(n);if(!r)return;return L=r[0],r[1]}}function u(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function p(e){return g(e)?e:y(e)?C(e):K(e)}function f(){function e(e){t=e,o.source=e,z(n,function(t,n){V(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=Y(f.prototype),o=Y(h.prototype);if(o.promiseDispatch=function(e,i,o){var s=G(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):V(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(n)return o;var e=m(t);return g(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},p.longStackSupport&&$)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(p(n))},i.fulfill=function(n){t||e(K(n))},i.reject=function(n){t||e(_(n))},i.notify=function(e){t||z(r,function(t,n){V(function(){n(e)})},void 0)},i}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=f();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function d(e){return l(function(t,n){for(var r=0,i=e.length;i>r;r++)p(e[r]).then(t,n)})}function h(e,t,n){void 0===t&&(t=function(e){return _(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Y(h.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(a){s=_(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function v(e,t,n,r){return p(e).then(t,n,r)}function m(e){if(g(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function g(e){return t(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function y(e){return t(e)&&"function"==typeof e.then}function O(e){return g(e)&&"pending"===e.inspect().state}function x(e){return!g(e)||"fulfilled"===e.inspect().state}function b(e){return g(e)&&"rejected"===e.inspect().state}function w(){rt.length=0,it.length=0,ot||(ot=!0)}function k(e,t){ot&&(it.push(e),t&&"undefined"!=typeof t.stack?rt.push(t.stack):rt.push("(no stack) "+t))}function D(e){if(ot){var t=X(it,e);-1!==t&&(it.splice(t,1),rt.splice(t,1))}}function _(e){var t=h({when:function(t){return t&&D(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return k(t,e),t}function K(e){return h({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return et(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function C(e){var t=f();return V(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function q(e){return h({isDef:function(){}},function(t,n){return I(e,t,n)},function(){return p(e).inspect()})}function R(e,t,n){return p(e).spread(t,n)}function S(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=r[e](t)}catch(a){return _(a)}return s.done?s.value:v(s.value,i,o)}try{s=r[e](t)}catch(a){return n(a)?a.value:_(a)}return v(s,i,o)}var r=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function j(e){p.done(p.async(e)())}function P(e){throw new B(e)}function E(e){return function(){return R([this,F(arguments)],function(t,n){return e.apply(t,n)})}}function I(e,t,n){return p(e).dispatch(t,n)}function F(e){return v(e,function(e){var t=0,n=f();return z(e,function(r,i,o){var s;g(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,v(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function A(e){return v(e,function(e){return e=H(e,p),v(F(H(e,function(e){return v(e,J,J)})),function(){return e})})}function T(e){return p(e).allSettled()}function N(e,t){return p(e).then(void 0,void 0,t)}function M(e,t){return p(e).nodeify(t)}var $=!1;try{throw new Error}catch(U){$=!!U.stack}var L,B,W=c(),J=function(){},V=function(){function e(){for(;t.next;){t=t.next;var n=t.task;t.task=void 0;var i=t.domain;i&&(t.domain=void 0,i.enter());try{n()}catch(s){if(o)throw i&&i.exit(),setTimeout(e,0),i&&i.enter(),s;setTimeout(function(){throw s},0)}i&&i.exit()}r=!1}var t={task:void 0,next:null},n=t,r=!1,i=void 0,o=!1;if(V=function(e){n=n.next={task:e,domain:o&&process.domain,next:null},r||(r=!0,i())},"undefined"!=typeof process&&process.nextTick)o=!0,i=function(){process.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){i=a,s.port1.onmessage=e,e()};var a=function(){s.port2.postMessage(0)};i=function(){setTimeout(e,0),a()}}else i=function(){setTimeout(e,0)};return V}(),Q=Function.call,G=e(Array.prototype.slice),z=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),X=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),H=e(Array.prototype.map||function(e,t){var n=this,r=[];return z(n,function(i,o,s){r.push(e.call(t,o,s,n))},void 0),r}),Y=Object.create||function(e){function t(){}return t.prototype=e,new t},Z=e(Object.prototype.hasOwnProperty),et=Object.keys||function(e){var t=[];for(var n in e)Z(e,n)&&t.push(n);return t},tt=e(Object.prototype.toString);B="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var nt="From previous event:";p.resolve=p,p.nextTick=V,p.longStackSupport=!1,p.defer=f,f.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(G(arguments,1)):e.resolve(n)}},p.Promise=l,p.promise=l,l.race=d,l.all=F,l.reject=_,l.resolve=p,p.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},p.join=function(e,t){return p(e).join(t)},h.prototype.join=function(e){return p([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},p.race=d,h.prototype.race=function(){return this.then(p.race)},p.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,t,n){function i(t){try{return"function"==typeof e?e(t):t}catch(n){return _(n)}}function o(e){if("function"==typeof t){r(e,a);try{return t(e)}catch(n){return _(n)}}return _(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,c=f(),u=!1;return V(function(){a.promiseDispatch(function(e){u||(u=!0,c.resolve(i(e)))},"when",[function(e){u||(u=!0,c.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(r){if(n=!0,!p.onerror)throw r;p.onerror(r)}n||c.notify(t)}]),c.promise},p.when=v,h.prototype.thenResolve=function(e){return this.then(function(){return e})},p.thenResolve=function(e,t){return p(e).thenResolve(t)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},p.thenReject=function(e,t){return p(e).thenReject(t)},p.nearer=m,p.isPromise=g,p.isPromiseAlike=y,p.isPending=O,h.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=x,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=b,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rt=[],it=[],ot=!0;p.resetUnhandledRejections=w,p.getUnhandledReasons=function(){return rt.slice()},p.stopUnhandledRejectionTracking=function(){w(),ot=!1},w(),p.reject=_,p.fulfill=K,p.master=q,p.spread=R,h.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},p.async=S,p.spawn=j,p["return"]=P,p.promised=E,p.dispatch=I,h.prototype.dispatch=function(e,t){var n=this,r=f();return V(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},p.get=function(e,t){return p(e).dispatch("get",[t])},h.prototype.get=function(e){return this.dispatch("get",[e])},p.set=function(e,t,n){return p(e).dispatch("set",[t,n])},h.prototype.set=function(e,t){return this.dispatch("set",[e,t])},p.del=p["delete"]=function(e,t){return p(e).dispatch("delete",[t])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},p.mapply=p.post=function(e,t,n){return p(e).dispatch("post",[t,n])},h.prototype.mapply=h.prototype.post=function(e,t){return this.dispatch("post",[e,t])},p.send=p.mcall=p.invoke=function(e,t){return p(e).dispatch("post",[t,G(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,G(arguments,1)])},p.fapply=function(e,t){return p(e).dispatch("apply",[void 0,t])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},p["try"]=p.fcall=function(e){return p(e).dispatch("apply",[void 0,G(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,G(arguments)])},p.fbind=function(e){var t=p(e),n=G(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(G(arguments))])}},h.prototype.fbind=function(){var e=this,t=G(arguments);return function(){return e.dispatch("apply",[this,t.concat(G(arguments))])}},p.keys=function(e){return p(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},p.all=F,h.prototype.all=function(){return F(this)},p.allResolved=u(A,"allResolved","allSettled"),h.prototype.allResolved=function(){return A(this)},p.allSettled=T,h.prototype.allSettled=function(){return this.then(function(e){return F(H(e,function(e){function t(){return e.inspect()}return e=p(e),e.then(t,t)}))})},p.fail=p["catch"]=function(e,t){return p(e).then(void 0,t)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},p.progress=N,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},p.fin=p["finally"]=function(e,t){return p(e)["finally"](t)},h.prototype.fin=h.prototype["finally"]=function(e){return e=p(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},p.done=function(e,t,n,r){return p(e).done(t,n,r)},h.prototype.done=function(e,t,n){var i=function(e){V(function(){if(r(e,o),!p.onerror)throw e;p.onerror(e)})},o=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(i=process.domain.bind(i)),o.then(void 0,i)},p.timeout=function(e,t,n){return p(e).timeout(t,n)},h.prototype.timeout=function(e,t){var n=f(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},p.delay=function(e,t){return void 0===t&&(t=e,e=void 0),p(e).delay(t)},h.prototype.delay=function(e){return this.then(function(t){var n=f();
return setTimeout(function(){n.resolve(t)},e),n.promise})},p.nfapply=function(e,t){return p(e).nfapply(t)},h.prototype.nfapply=function(e){var t=f(),n=G(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},p.nfcall=function(e){var t=G(arguments,1);return p(e).nfapply(t)},h.prototype.nfcall=function(){var e=G(arguments),t=f();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},p.nfbind=p.denodeify=function(e){var t=G(arguments,1);return function(){var n=t.concat(G(arguments)),r=f();return n.push(r.makeNodeResolver()),p(e).fapply(n).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=G(arguments);return e.unshift(this),p.denodeify.apply(void 0,e)},p.nbind=function(e,t){var n=G(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(G(arguments)),o=f();return i.push(o.makeNodeResolver()),p(r).fapply(i).fail(o.reject),o.promise}},h.prototype.nbind=function(){var e=G(arguments,0);return e.unshift(this),p.nbind.apply(void 0,e)},p.nmapply=p.npost=function(e,t,n){return p(e).npost(t,n)},h.prototype.nmapply=h.prototype.npost=function(e,t){var n=G(t||[]),r=f();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(e,t){var n=G(arguments,2),r=f();return n.push(r.makeNodeResolver()),p(e).dispatch("post",[t,n]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var t=G(arguments,1),n=f();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},p.nodeify=M,h.prototype.nodeify=function(e){return e?(this.then(function(t){V(function(){e(null,t)})},function(t){V(function(){e(t)})}),void 0):this};var st=c();return p}),"undefined"==typeof OlapicRequireDevKit&&OlapicRequireDevKit.require.config(OlapicDevKitRequire),OlapicRequireDevKit.define("bridge",["olapic","request","config","storage","q"],function(e,t,n,r,i){return OlapicDevKit=e,_OlapicDevKitRequest=t,_OlapicDevKitConfig=n,_OlapicDevKitStorage=r,_OlapicDevKitPromises=i,"function"==typeof loadOlapicSDK&&loadOlapicSDK(),e}),_OlapicDevKitRequire=OlapicRequireDevKit,_OlapicDevKitRequire.require(["bridge"])}(window,void 0);